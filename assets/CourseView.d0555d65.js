import{y as U,B as I,z as ae,A as R,n as j,p as w,r as f,o as r,l as h,a as t,w as o,h as a,C as D,t as d,F as E,D as H,E as C,c as v,G as le,I as y,u as _,a9 as se,aa as oe,ab as ne,H as F,x as re,a8 as b,_ as ue,d as G,P,a3 as B,S as ce,g as ie,ac as de}from"./index.34e3c943.js";import{a as L}from"./base.service.f6fbc9e7.js";class me{async getAllCourse(){return U({method:"get",url:I+"/course",headers:L()})}async deleteCourse(p){return U({method:"delete",url:I+"/course/"+p,headers:L()})}}const X=new me,he=["innerHTML"],pe={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},_e={key:0},fe=a("th",null,"Name",-1),ve=a("th",null,"Category",-1),ye=a("th",null,"Price",-1),ge=a("th",null,"Created",-1),Ce=a("th",null,null,-1),be={"data-label":"Name"},ke={"data-label":"Category"},Ve={"data-label":"Price"},xe={"data-label":"Created",class:"lg:w-1 whitespace-nowrap"},we=["title"],Se={class:"before:hidden lg:w-1 whitespace-nowrap"},Te={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},$e={__name:"TableCoures",props:{checkable:Boolean},async setup(S){let p,T;const $=([p,T]=ae(()=>X.getAllCourse()),p=await p,T(),p).data,n=R({value:""}),u=R({value:"",id:"",price:""}),k=j(),A=k.role=="TEACHER",c=w(()=>$),V=f(!1),i=f(!1),M=f(5),g=f(0),x=f([]),z=w(()=>c.value.slice(M.value*g.value,M.value*(g.value+1))),O=w(()=>Math.ceil(c.value.length/M.value)),W=w(()=>g.value+1),q=w(()=>{const s=[];for(let l=0;l<O.value;l++)s.push(l);return s}),J=(s,l)=>{const e=[];return s.forEach(m=>{l(m)||e.push(m)}),e},K=(s,l)=>{s?x.value.push(l):x.value=J(x.value,e=>e.id===l.id)},Q=s=>{n.value=s,V.value=!0},Y=(s,l)=>{u.id=s,u.value=l,i.value=!0},N=f(!1),Z=(s,l,e)=>{u.value=s,u.id=l,u.price=e,N.value=!0},ee=async()=>{await U({method:"post",url:I+"/purchase",data:{userId:k.id,courseId:u.id,price:u.price},headers:L()}).then(s=>{b({type:"success",title:"Th\xE0nh c\xF4ng",text:"Th\xEAm kh\xF3a h\u1ECDc th\xE0nh c\xF4ng"})}).catch(s=>{b({type:"error",title:"L\u1ED7i",text:"Th\xEAm kh\xF3a h\u1ECDc th\u1EA5t b\u1EA1i"})})},te=()=>{X.deleteCourse(u.id).then(s=>{b({type:"success",title:"Th\xE0nh c\xF4ng",text:"X\xF3a kh\xF3a h\u1ECDc th\xE0nh c\xF4ng"})}).catch(s=>{b({type:"error",title:"L\u1ED7i",text:"X\xF3a kh\xF3a h\u1ECDc th\u1EA5t b\u1EA1i"})})};return(s,l)=>(r(),h(E,null,[t(D,{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value=e),title:"Description"},{default:o(()=>[a("span",{innerHTML:n.value},null,8,he)]),_:1},8,["modelValue"]),t(D,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),title:"Please confirm",button:"danger","has-cancel":"",onConfirm:te},{default:o(()=>[a("p",null,"Delete "+d(u.value)+"?",1)]),_:1},8,["modelValue"]),t(D,{modelValue:N.value,"onUpdate:modelValue":l[2]||(l[2]=e=>N.value=e),title:"Please confirm",button:"success","has-cancel":"",onConfirm:ee},{default:o(()=>[a("p",null,"Add "+d(u.value),1)]),_:1},8,["modelValue"]),x.value.length?(r(),h("div",pe,[(r(!0),h(E,null,H(x.value,e=>(r(),h("span",{key:e.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},d(e.name),1))),128))])):C("",!0),a("table",null,[a("thead",null,[a("tr",null,[S.checkable?(r(),h("th",_e)):C("",!0),fe,ve,ye,ge,Ce])]),a("tbody",null,[(r(!0),h(E,null,H(_(z),e=>(r(),h("tr",{key:e.id},[S.checkable?(r(),v(le,{key:0,onChecked:m=>K(m,e)},null,8,["onChecked"])):C("",!0),a("td",be,d(e.name),1),a("td",ke,d(e.category),1),a("td",Ve,d(e.price),1),a("td",xe,[a("small",{class:"text-gray-500 dark:text-slate-400",title:e.created},d(Date(e.createTime).toString()),9,we)]),a("td",Se,[t(F,{type:"justify-start lg:justify-end","no-wrap":""},{default:o(()=>[t(y,{color:"info",icon:_(se),small:"",onClick:m=>Q(e.description)},null,8,["icon","onClick"]),A?(r(),v(y,{key:0,color:"danger",icon:_(oe),small:"",onClick:m=>Y(e.id,e.name)},null,8,["icon","onClick"])):C("",!0),t(y,{color:"success",icon:_(ne),small:"",onClick:m=>Z(e.name,e.id,e.price)},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),a("div",Te,[t(re,null,{default:o(()=>[t(F,null,{default:o(()=>[(r(!0),h(E,null,H(_(q),e=>(r(),v(y,{key:e,active:e===g.value,label:e+1,color:e===g.value?"lightDark":"whiteDark",small:"",onClick:m=>g.value=e},null,8,["active","label","color","onClick"]))),128))]),_:1}),a("small",null,"Page "+d(_(W))+" of "+d(_(O)),1)]),_:1})])],64))}},Ae={class:"grid grid-cols-2 gap-6 my-4"},Be={__name:"CourseView",setup(S){const T=j().role=="TEACHER",$=["ENGLISH","SCIENCE","SOFTWARE","COMPUTER","INFORMATION","UIUX"],n=R({name:"",description:"",price:"",category:$[0]}),u=f(!1),k=async()=>{await U({method:"post",url:I+"/course",data:{name:n.name,description:n.description,price:n.price,category:n.category},headers:L()}).then(A=>{b({type:"success",title:"Th\xE0nh c\xF4ng",text:"T\u1EA1o kh\xF3a h\u1ECDc th\xE0nh c\xF4ng"}),location.reload()}).catch(A=>{b({type:"error",title:"L\u1ED7i",text:"T\u1EA1o kh\xF3a h\u1ECDc th\u1EA5t b\u1EA1i"})})};return(A,c)=>{const V=de("BaseButtons");return r(),v(ue,null,{default:o(()=>[t(ie,null,{default:o(()=>[T?(r(),v(y,{key:0,class:"my-3",color:"info",label:"Create Course",onClick:c[0]||(c[0]=i=>u.value=!u.value)})):C("",!0),u.value?(r(),v(G,{key:1,form:"",onSubmit:k,class:"mb-3"},{footer:o(()=>[t(V,null,{default:o(()=>[t(y,{type:"submit",color:"info",label:"Submit",class:"mx-3",onClick:k}),t(y,{type:"reset",color:"info",outline:"",label:"Reset"})]),_:1})]),default:o(()=>[a("div",Ae,[t(P,{label:"Course Name"},{default:o(()=>[t(B,{modelValue:n.name,"onUpdate:modelValue":c[1]||(c[1]=i=>n.name=i)},null,8,["modelValue"])]),_:1}),t(P,{label:"Price"},{default:o(()=>[t(B,{modelValue:n.price,"onUpdate:modelValue":c[2]||(c[2]=i=>n.price=i)},null,8,["modelValue"])]),_:1})]),t(P,{label:"Category"},{default:o(()=>[t(B,{modelValue:n.category,"onUpdate:modelValue":c[3]||(c[3]=i=>n.category=i),options:$},null,8,["modelValue"])]),_:1}),t(P,{label:"Description"},{default:o(()=>[t(B,{modelValue:n.description,"onUpdate:modelValue":c[4]||(c[4]=i=>n.description=i),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})):C("",!0),t(G,{title:"Courses",class:"m-3","has-table":""},{default:o(()=>[(r(),v(ce,null,{default:o(()=>[t($e,{checkable:""})]),_:1}))]),_:1})]),_:1})]),_:1})}}};export{Be as default};
